<!doctype html>
<html lang="fr" class="h-full bg-gray-50">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}RH System{% endblock %}</title>
    <!-- Tailwind CSS CDN (for quick integration). For production, consider django-tailwind build process. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: { DEFAULT: '#4f46e5' } }
          }
        }
      }
    </script>
    {% block extra_head %}{% endblock %}
  </head>
  <body class="min-h-full flex flex-col">
    <nav class="bg-white border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex h-16 items-center justify-between">
          <div class="flex items-center gap-6">
            <a class="text-xl font-semibold text-gray-900" href="/">RH</a>
            {% if request.user.is_authenticated %}
              <a class="text-gray-600 hover:text-gray-900" href="{% url 'accounts:profile' %}">Profil</a>
              {% if request.user.is_staff or request.user.is_superuser %}
                <a class="text-gray-600 hover:text-gray-900" href="/admin/">Admin</a>
              {% else %}
                {% if request.user.profile and request.user.profile.role == 'admin' %}
                  <a class="text-gray-600 hover:text-gray-900" href="/admin/">Admin</a>
                {% endif %}
              {% endif %}
              {% if request.user.profile and request.user.profile.role == 'recruiter' %}
                <a href="/recruitment/dashboard/recruteur/" class="text-gray-400">Recrutement</a>
              {% elif request.user.profile and request.user.profile.role == 'candidate' %}
                <a href="{% url 'recruitment:user_candidatures' %}" class="text-gray-400">Mes candidatures</a>
              {% endif %}
            {% endif %}
          </div>
          <div class="flex items-center gap-4">
            {% if request.user.is_authenticated %}
              <a class="text-gray-600 hover:text-gray-900" href="{% url 'accounts:logout' %}">DÃ©connexion</a>
            {% else %}
              <a class="text-gray-600 hover:text-gray-900" href="{% url 'accounts:login' %}">Connexion</a>
              <a class="inline-flex items-center px-3 py-1.5 rounded-md bg-primary text-white hover:bg-indigo-700" href="{% url 'accounts:register' %}">Inscription</a>
            {% endif %}
          </div>
        </div>
      </div>
    </nav>

    <main class="flex-1">
      <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        {% if messages %}
          <div class="space-y-2 mb-4">
            {% for message in messages %}
              {% if 'success' in message.tags %}
                <div class="rounded-md p-3 text-sm bg-green-50 text-green-800 border border-green-200">{{ message }}</div>
              {% elif 'error' in message.tags %}
                <div class="rounded-md p-3 text-sm bg-red-50 text-red-800 border border-red-200">{{ message }}</div>
              {% elif 'info' in message.tags %}
                <div class="rounded-md p-3 text-sm bg-blue-50 text-blue-800 border border-blue-200">{{ message }}</div>
              {% else %}
                <div class="rounded-md p-3 text-sm bg-gray-50 text-gray-800 border border-gray-200">{{ message }}</div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}

        {% block content %}{% endblock %}
      </div>
    </main>

    <footer class="border-t border-gray-200 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center text-gray-500">
        <small>&copy; {{ now|date:'Y' }} RH System</small>
      </div>
    </footer>

    {% block extra_js %}{% endblock %}
  </body>
</html>
